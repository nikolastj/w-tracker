import{a as Y}from"./chunk-C5T37IM6.js";import{a as W,b as z,c as H}from"./chunk-FMOWJQ47.js";import{C as J,D as K,F as Q,G as X,b as L,d as h,f as R,g as N,k as T,n as V,o as B,r as D,s as q,t as $,u as O,v as j,y as U}from"./chunk-NCW6EJ4U.js";import{a as A,b as G}from"./chunk-5XW22DJ7.js";import"./chunk-AGEABA7W.js";import{N as C,P,Q as I,R as k}from"./chunk-QKA2HL2V.js";import{I as w,Oa as s,Pa as i,Q as c,Qa as t,Ra as u,S as f,T as g,Wb as y,Ya as _,Zb as E,_a as x,ab as p,e as v,hc as F,jc as M,ma as a,ob as r,pb as b,ua as S,ya as d}from"./chunk-VYDVCLZP.js";function tt(e,n){e&1&&(i(0,"mat-error"),r(1," Email is required "),t())}function et(e,n){e&1&&(i(0,"mat-error"),r(1," Please enter a valid email address "),t())}function it(e,n){e&1&&u(0,"mat-spinner",15)}function rt(e,n){if(e&1){let o=_();i(0,"mat-card",5)(1,"form",6),x("ngSubmit",function(){f(o);let m=p();return g(m.onSubmit())}),i(2,"div")(3,"mat-form-field",7)(4,"mat-label"),r(5,"Email Address"),t(),u(6,"input",8),i(7,"mat-icon",9),r(8,"email"),t(),d(9,tt,2,0,"mat-error",10)(10,et,2,0,"mat-error",10),t()(),i(11,"div")(12,"button",11),d(13,it,1,0,"mat-spinner",12),r(14," Send Reset Link "),t()(),i(15,"div",13)(16,"a",14),r(17," Back to sign in "),t()()()()}if(e&2){let o,l,m=p();a(),s("formGroup",m.forgotPasswordForm),a(8),s("ngIf",(o=m.forgotPasswordForm.get("email"))==null?null:o.hasError("required")),a(),s("ngIf",(l=m.forgotPasswordForm.get("email"))==null?null:l.hasError("email")),a(2),s("disabled",m.forgotPasswordForm.invalid||m.isLoading),a(),s("ngIf",m.isLoading)}}function ot(e,n){e&1&&u(0,"mat-spinner",15)}function at(e,n){if(e&1){let o=_();i(0,"mat-card",16)(1,"div",17)(2,"mat-icon",18),r(3,"check_circle"),t()(),i(4,"h3",19),r(5,"Reset link sent!"),t(),i(6,"p",20),r(7," We've sent a password reset link to "),i(8,"strong"),r(9),t(),r(10,". Please check your email and follow the instructions to reset your password. "),t(),i(11,"div",21)(12,"button",22),x("click",function(){f(o);let m=p();return g(m.resendEmail())}),d(13,ot,1,0,"mat-spinner",12),r(14," Resend Email "),t(),i(15,"div")(16,"a",14),r(17," Back to sign in "),t()()()()}if(e&2){let o=p();a(9),b(o.submittedEmail),a(3),s("disabled",o.isLoading),a(),s("ngIf",o.isLoading)}}var Z=class e{fb=c(D);authApiService=c(Y);snackBar=c(Q);destroy$=new v;isLoading=!1;emailSent=!1;submittedEmail="";forgotPasswordForm=this.fb.group({email:["",[h.required,h.email]]});ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){this.forgotPasswordForm.valid&&!this.isLoading&&this.submitResetRequest()}resendEmail(){this.isLoading||this.submitResetRequest()}submitResetRequest(){this.isLoading=!0;let n=this.forgotPasswordForm.get("email")?.value||this.submittedEmail;this.authApiService.requestPasswordReset(n).pipe(w(this.destroy$)).subscribe({next:()=>{this.isLoading=!1,this.emailSent=!0,this.submittedEmail=n},error:()=>{this.isLoading=!1}})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=S({type:e,selectors:[["app-forgot-password"]],decls:8,vars:2,consts:[[1,"w-full","max-w-md","space-y-8"],[1,"auth-heading","mt-6","text-center","text-3xl","font-extrabold"],[1,"auth-text","mt-2","text-center","text-sm"],["class","auth-card p-6",4,"ngIf"],["class","auth-card p-6 text-center",4,"ngIf"],[1,"auth-card","p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","type","email","formControlName","email","placeholder","Enter your email address","autocomplete","email"],["matSuffix",""],[4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"w-full",3,"disabled"],["diameter","20","class","mr-2",4,"ngIf"],[1,"text-center"],["routerLink","/auth/login",1,"font-medium","text-indigo-600","hover:text-indigo-500"],["diameter","20",1,"mr-2"],[1,"auth-card","p-6","text-center"],[1,"mb-4"],[1,"text-6xl","text-green-500"],[1,"auth-heading","mb-2","text-lg","font-medium"],[1,"auth-text","mb-6","text-sm"],[1,"space-y-3"],["mat-raised-button","","color","primary",1,"w-full",3,"click","disabled"]],template:function(o,l){o&1&&(i(0,"div",0)(1,"div")(2,"h2",1),r(3,"Reset your password"),t(),i(4,"p",2),r(5," Enter your email address and we'll send you a link to reset your password. "),t()(),d(6,rt,18,5,"mat-card",3)(7,at,18,3,"mat-card",4),t()),o&2&&(a(6),s("ngIf",!l.emailSent),a(),s("ngIf",l.emailSent))},dependencies:[E,y,q,T,L,R,N,V,B,M,F,G,A,W,U,$,O,j,H,z,P,C,k,I,K,J,X],encapsulation:2})};export{Z as ForgotPasswordComponent};
