import{M as s,f as o}from"./chunk-SLCG6JVP.js";var u=class r{authState=new o({user:null,token:null,isAuthenticated:!1});authState$=this.authState.asObservable();constructor(){this.loadAuthFromStorage()}getCurrentAuthState(){return this.authState.value}isAuthenticated(){return this.authState.value.isAuthenticated}getCurrentUser(){return this.authState.value.user}getToken(){return this.authState.value.token}setAuthState(t){let e={user:{id:t.id,username:t.username,email:t.email,firstName:t.firstName||"",lastName:t.lastName||"",bio:t.bio||""},token:t.token,isAuthenticated:!0};this.authState.next(e),this.saveAuthToStorage(e)}clearAuthState(){let t={user:null,token:null,isAuthenticated:!1};this.authState.next(t),this.removeAuthFromStorage()}saveAuthToStorage(t){t.token&&localStorage.setItem("auth_token",t.token),t.user&&localStorage.setItem("auth_user",JSON.stringify(t.user))}loadAuthFromStorage(){let t=localStorage.getItem("auth_token"),e=localStorage.getItem("auth_user");if(t&&e)try{let a=JSON.parse(e);this.authState.next({user:a,token:t,isAuthenticated:!0})}catch(a){console.error("Failed to parse stored user data:",a),this.clearAuthState()}}removeAuthFromStorage(){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")}static \u0275fac=function(e){return new(e||r)};static \u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})};export{u as a};
