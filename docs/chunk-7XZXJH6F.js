import{b as se,c as ce}from"./chunk-22OC7OTI.js";import{a as Z,b as $,c as ee}from"./chunk-DSXFWL3H.js";import{c as ne,d as oe,e as re,f as ie,h as ae,i as me,j as le,k as de}from"./chunk-AQUTJZAY.js";import{b as ue}from"./chunk-JUWJYSTN.js";import{J as te,b as V,d as f,f as A,g as L,h as O,j as d,k as q,l as B,n as G,o as P,p as j,s as U,t as K,u as J,v as Q,y as X}from"./chunk-CPIKLXAK.js";import{a as z,b as Y,c as H}from"./chunk-MEFIOVFB.js";import{M as w,O as T,Q as E,R as I,S as N}from"./chunk-LJLGRWVS.js";import{$b as R,C as y,La as c,Ma as p,Qa as m,Ra as n,Sa as e,T as k,Ta as l,U as C,_a as _,aa as S,ab as b,ic as F,mb as M,oa as a,qb as o,sa as W,wa as h,za as x}from"./chunk-WDOU2XRE.js";var v=class extends O{constructor(t){super({id:new d(t?.id||null),dateCreated:new d(t?.dateCreated?new Date(t.dateCreated):new Date,f.required),runDuration:new d(t?.runDuration||null,[f.required,f.min(1)]),runDistance:new d(t?.runDistance||null,[f.min(0)]),runWorkoutType:new d(t?.runWorkoutType||null,f.required),comment:new d(t?.comment||"")})}getSubmitValue(){let t=this.value;return{id:t.id||void 0,dateCreated:t.dateCreated?.toISOString()||new Date().toISOString(),runDuration:t.runDuration,runDistance:t.runDistance||null,runWorkoutType:t.runWorkoutType,comment:t.comment||null}}};function fe(r,t){r&1&&(n(0,"div",2),l(1,"app-loader",27),e()),r&2&&(a(),m("opacity",80))}function ge(r,t){r&1&&(n(0,"div",14),o(1,"Workout type is required"),e())}function ke(r,t){r&1&&(n(0,"mat-error"),o(1,"Duration is required"),e())}function Ce(r,t){r&1&&(n(0,"mat-error"),o(1,"Duration must be at least 1 minute"),e())}function be(r,t){r&1&&(n(0,"mat-error"),o(1,"Distance cannot be negative"),e())}var pe=class r extends te{constructor(u,g){super();this.router=u;this.runningWorkoutsService=g}runningWorkoutForm=new v;isApiLoading=S(!1);workoutTypes=Object.values(le).map(u=>({value:u,label:de[u]}));ngOnInit(){}goBack(){this.router.navigate(["/dashboard"])}discardWorkout(){this.router.navigate(["/dashboard"])}hasUnsavedChanges(){return this.runningWorkoutForm.dirty}getConfirmationDialogData(){return{title:"Discard Running Workout?",message:"You have unsaved changes. Are you sure you want to leave?",confirmText:"Discard"}}saveWorkout(){if(!this.runningWorkoutForm.valid){this.runningWorkoutForm.markAllAsTouched();return}this.isApiLoading.set(!0);let u=this.runningWorkoutForm.getSubmitValue();this.runningWorkoutsService.createRunningWorkout(u).pipe(y(()=>this.isApiLoading.set(!1))).subscribe({next:()=>{this.runningWorkoutForm.markAsPristine(),this.router.navigate(["/dashboard"])}})}static \u0275fac=function(g){return new(g||r)(W(F),W(me))};static \u0275cmp=h({type:r,selectors:[["app-running-workout-create"]],features:[x],decls:51,vars:11,consts:[["picker",""],[1,"container","relative","mx-auto","h-full","max-w-2xl","md:p-6"],[1,"absolute","inset-0","z-50","h-screen","w-screen"],[1,"mb-6","hidden","md:block"],[1,"mb-4","flex","items-center","gap-4"],["mat-icon-button","",3,"click"],[1,"text-3xl","font-bold"],[1,"opacity-70"],[3,"ngSubmit","formGroup"],[1,"flex","h-full","flex-col","p-3","md:p-6"],[1,"flex-1"],[1,"form-field"],[1,"mb-4","block","text-sm","font-medium"],["bindLabel","label","bindValue","value","formControlName","runWorkoutType","placeholder","Select workout type",3,"items","clearable"],[1,"mt-1","text-sm","text-red-600"],[1,"mt-2","flex","gap-4"],["appearance","outline",1,"flex-1"],["matInput","","type","number","formControlName","runDuration","placeholder","e.g., 30","min","1"],["matInput","","type","number","formControlName","runDistance","placeholder","e.g., 5.2","step","0.1","min","0"],["appearance","outline",1,"w-full"],["matInput","","formControlName","dateCreated",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","comment","rows","3","placeholder","How did you feel? Any notes..."],[1,"mt-6","flex","justify-between","gap-4","pt-4"],["mat-stroked-button","","color","warn","type","button",1,"px-6",3,"click"],[1,"mr-2"],["mat-stroked-button","","color","accent","type","submit",1,"px-6",3,"disabled"],[1,"flex","h-full","w-full",3,"opacity"]],template:function(g,i){if(g&1){let s=_();n(0,"div",1),c(1,fe,2,1,"div",2),n(2,"div",3)(3,"div",4)(4,"button",5),b("click",function(){return k(s),C(i.goBack())}),n(5,"mat-icon"),o(6,"arrow_back"),e()(),n(7,"h1",6),o(8,"Add Running Workout"),e()(),n(9,"p",7),o(10,"Track your running activities and progress"),e()(),n(11,"form",8),b("ngSubmit",function(){return k(s),C(i.saveWorkout())}),n(12,"mat-card",9)(13,"mat-card-content",10)(14,"div",11)(15,"label",12),o(16,"Workout Type *"),e(),l(17,"ng-select",13),c(18,ge,2,0,"div",14),e(),n(19,"div",15)(20,"mat-form-field",16)(21,"mat-label"),o(22,"Duration (minutes) *"),e(),l(23,"input",17),c(24,ke,2,0,"mat-error"),c(25,Ce,2,0,"mat-error"),e(),n(26,"mat-form-field",16)(27,"mat-label"),o(28,"Distance (km)"),e(),l(29,"input",18),c(30,be,2,0,"mat-error"),e()(),n(31,"mat-form-field",19)(32,"mat-label"),o(33,"Date"),e(),l(34,"input",20)(35,"mat-datepicker-toggle",21)(36,"mat-datepicker",null,0),e(),n(38,"mat-form-field",19)(39,"mat-label"),o(40,"Comments"),e(),l(41,"textarea",22),e()(),n(42,"div",23)(43,"button",24),b("click",function(){return k(s),C(i.discardWorkout())}),n(44,"mat-icon",25),o(45,"delete_outline"),e(),o(46," Discard "),e(),n(47,"button",26)(48,"mat-icon",25),o(49,"save"),e(),o(50," Save Workout "),e()()()()()}if(g&2){let s=M(37);a(),p(i.isApiLoading()?1:-1),a(10),m("formGroup",i.runningWorkoutForm),a(6),m("items",i.workoutTypes)("clearable",!1),a(),p(i.runningWorkoutForm.controls.runWorkoutType.invalid&&i.runningWorkoutForm.controls.runWorkoutType.touched?18:-1),a(6),p(i.runningWorkoutForm.controls.runDuration.hasError("required")?24:-1),a(),p(i.runningWorkoutForm.controls.runDuration.hasError("min")?25:-1),a(5),p(i.runningWorkoutForm.controls.runDistance.hasError("min")?30:-1),a(4),m("matDatepicker",s),a(),m("for",s),a(12),m("disabled",i.isApiLoading()||i.runningWorkoutForm.invalid)}},dependencies:[R,U,q,V,B,A,L,j,G,P,E,T,w,N,I,H,z,Y,ee,$,X,K,J,Q,Z,ie,ne,oe,re,ae,ce,se,ue],styles:[".form-field[_ngcontent-%COMP%]{margin-bottom:1rem}  .ng-select .ng-select-container{min-height:56px;border:1px solid rgba(0,0,0,.23);border-radius:4px}  .ng-select .ng-select-container:hover{border-color:#000000de}  .ng-select.ng-select-focused .ng-select-container{border-color:var(--color-primary);border-width:2px}"]})};export{v as a,pe as b};
