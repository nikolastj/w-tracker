import{a as te}from"./chunk-7EXCUJRI.js";import{a as W,b as X,c as Y}from"./chunk-F7SWNNAA.js";import{C as Z,D as ee,b as R,d as f,f as T,g as A,h as V,j as h,k as G,n as U,o as $,s as j,t as z,u as J,v as K,y as Q}from"./chunk-N64BN2RT.js";import{a as B,b as H}from"./chunk-SGXA3MTQ.js";import{a as P}from"./chunk-RY63RFFW.js";import"./chunk-U7MQBPUT.js";import{L as k,N,P as q,Q as D,R as O}from"./chunk-K2YWOXUX.js";import{$a as c,I as _,Ia as y,J as x,Pa as m,Q as p,Qa as e,Ra as t,Sa as u,Xb as C,_b as L,e as S,hc as F,ic as E,kc as I,na as a,pb as o,qb as M,va as w,za as d}from"./chunk-RNAKR2YX.js";var g=class extends V{constructor(){super({username:new h("",f.required),password:new h("",[f.required,f.minLength(6)])})}getSubmitValue(){let n=this.value;return{username:n.username||"",password:n.password||""}}};function ie(i,n){i&1&&(e(0,"mat-error"),o(1," Username is required "),t())}function oe(i,n){i&1&&(e(0,"mat-error"),o(1," Password is required "),t())}function ne(i,n){i&1&&(e(0,"mat-error"),o(1," Password must be at least 6 characters long "),t())}function ae(i,n){i&1&&u(0,"mat-spinner",17)}function me(i,n){i&1&&(e(0,"span"),o(1,"Sign In"),t())}var re=class i{authStateService=p(P);authApiService=p(te);router=p(F);destroy$=new S;hidePassword=!0;isLoading=!1;loginForm=new g;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){if(this.loginForm.valid&&!this.isLoading){this.isLoading=!0;let n=this.loginForm.getSubmitValue();this.authApiService.login(n).pipe(x(s=>{this.authStateService.setAuthState(s)}),_(this.destroy$)).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/dashboard"])},error:()=>{this.isLoading=!1}})}}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=w({type:i,selectors:[["app-login"]],decls:36,vars:11,consts:[[1,"w-full","max-w-md","space-y-8"],[1,"auth-heading","mt-6","text-center","text-3xl","font-extrabold"],[1,"auth-text","mt-2","text-center","text-sm"],["routerLink","/auth/register",1,"font-medium","text-indigo-600","hover:text-indigo-500"],[1,"auth-card","p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","username","placeholder","Enter your username","autocomplete","username"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-sm"],["routerLink","/auth/forgot-password",1,"font-medium","text-indigo-600","hover:text-indigo-500"],["mat-raised-button","","color","primary","type","submit",1,"w-full",3,"disabled"],["diameter","20","class","mr-2",4,"ngIf"],["diameter","20",1,"mr-2"]],template:function(s,r){if(s&1&&(e(0,"div",0)(1,"div")(2,"h2",1),o(3," Sign in to your account "),t(),e(4,"p",2),o(5," Or "),e(6,"a",3),o(7," create a new account "),t()()(),e(8,"mat-card",4)(9,"form",5),c("ngSubmit",function(){return r.onSubmit()}),e(10,"div")(11,"mat-form-field",6)(12,"mat-label"),o(13,"Username"),t(),u(14,"input",7),e(15,"mat-icon",8),o(16,"person"),t(),d(17,ie,2,0,"mat-error",9),t()(),e(18,"div")(19,"mat-form-field",6)(20,"mat-label"),o(21,"Password"),t(),u(22,"input",10),e(23,"button",11),c("click",function(){return r.hidePassword=!r.hidePassword}),e(24,"mat-icon"),o(25),t()(),d(26,oe,2,0,"mat-error",9)(27,ne,2,0,"mat-error",9),t()(),e(28,"div",12)(29,"div",13)(30,"a",14),o(31," Forgot your password? "),t()()(),e(32,"div")(33,"button",15),d(34,ae,1,0,"mat-spinner",16)(35,me,2,0,"span",9),t()()()()()),s&2){let l,v,b;a(9),m("formGroup",r.loginForm),a(8),m("ngIf",(l=r.loginForm.get("username"))==null?null:l.hasError("required")),a(5),m("type",r.hidePassword?"password":"text"),a(),y("aria-label","Hide password")("aria-pressed",r.hidePassword),a(2),M(r.hidePassword?"visibility_off":"visibility"),a(),m("ngIf",(v=r.loginForm.get("password"))==null?null:v.hasError("required")),a(),m("ngIf",(b=r.loginForm.get("password"))==null?null:b.hasError("minlength")),a(6),m("disabled",r.loginForm.invalid||r.isLoading),a(),m("ngIf",r.isLoading),a(),m("ngIf",!r.isLoading)}},dependencies:[L,C,j,G,R,T,A,U,$,I,E,H,B,W,Q,z,J,K,Y,X,q,N,k,O,D,ee,Z],styles:[".auth-background[_ngcontent-%COMP%]{background-color:light-dark(#f9fafb,#111827)}.auth-card[_ngcontent-%COMP%]{background-color:light-dark(#ffffff,#1f2937);box-shadow:light-dark(0 10px 15px -3px rgba(0,0,0,.1),0 10px 15px -3px rgba(0,0,0,.5))}.auth-heading[_ngcontent-%COMP%]{color:light-dark(#111827,#f9fafb)}.auth-text[_ngcontent-%COMP%]{color:light-dark(#6b7280,#d1d5db)}"]})};export{re as LoginComponent};
