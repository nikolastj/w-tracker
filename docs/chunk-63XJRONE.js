import{a as pe}from"./chunk-QN35GHM7.js";import{a as ae,b as me,c as le}from"./chunk-DSXFWL3H.js";import{C as se,D as de,b as z,d,f as J,g as K,h as Q,j as u,k as W,n as X,o as Y,s as Z,t as re,u as ie,v as oe,y as ne}from"./chunk-CPIKLXAK.js";import{a as ee,c as te}from"./chunk-MEFIOVFB.js";import{a as U}from"./chunk-GUI74BY4.js";import"./chunk-Y3S3S6VT.js";import{M as G,O as B,Q as $,R as j,S as H}from"./chunk-LJLGRWVS.js";import{$b as A,Aa as f,J as q,Ja as h,K as k,Qa as m,R as g,Ra as t,Sa as e,Ta as p,Yb as L,a as P,ab as c,b as I,e as N,ic as V,jc as D,lc as O,oa as a,qb as o,rb as C,wa as T}from"./chunk-WDOU2XRE.js";var _=class r extends Q{constructor(){super({firstName:new u("",d.required),lastName:new u("",d.required),username:new u("",[d.required,d.minLength(3)]),bio:new u(""),imageUrl:new u(""),password:new u("",[d.required,d.minLength(6)]),confirmPassword:new u("",d.required),email:new u("",[d.required,d.email]),registerCode:new u("",d.required)},{validators:r.passwordMatchValidator})}getSubmitValue(){let n=this.value;return{user:{firstName:n.firstName||"",lastName:n.lastName||"",username:n.username||"",bio:n.bio||"",password:n.password||"",email:n.email||"",registerCode:n.registerCode||""}}}static passwordMatchValidator=n=>{let l=n,i=l.get("password"),s=l.get("confirmPassword");return i&&s&&i.value!==s.value?(s.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(s?.hasError("passwordMismatch")&&s.setErrors(null),null)}};function fe(r,n){r&1&&(t(0,"mat-error"),o(1," Register code is required "),e())}function ge(r,n){r&1&&(t(0,"mat-error"),o(1," First name is required "),e())}function ce(r,n){r&1&&(t(0,"mat-error"),o(1," Last name is required "),e())}function _e(r,n){r&1&&(t(0,"mat-error"),o(1," Username is required "),e())}function he(r,n){r&1&&(t(0,"mat-error"),o(1," Username must be at least 3 characters long "),e())}function Ce(r,n){r&1&&(t(0,"mat-error"),o(1," Email is required "),e())}function we(r,n){r&1&&(t(0,"mat-error"),o(1," Please enter a valid email address "),e())}function ve(r,n){r&1&&(t(0,"mat-error"),o(1," Password is required "),e())}function be(r,n){r&1&&(t(0,"mat-error"),o(1," Password must be at least 6 characters long "),e())}function Se(r,n){r&1&&(t(0,"mat-error"),o(1," Please confirm your password "),e())}function Ee(r,n){r&1&&(t(0,"mat-error"),o(1," Passwords do not match "),e())}function xe(r,n){r&1&&p(0,"mat-spinner",23)}function ye(r,n){r&1&&(t(0,"span"),o(1,"Create Account"),e())}var ue=class r{authStateService=g(U);authApiService=g(pe);router=g(V);destroy$=new N;hidePassword=!0;hideConfirmPassword=!0;isLoading=!1;registerForm=new _;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){if(this.registerForm.valid&&!this.isLoading){this.isLoading=!0;let n=this.registerForm.getSubmitValue();this.authApiService.register(n).pipe(k(l=>{l.token&&this.authStateService.setAuthState(I(P({},l.user),{token:l.token}))}),q(this.destroy$)).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/dashboard"])},error:()=>{this.isLoading=!1}})}}static \u0275fac=function(l){return new(l||r)};static \u0275cmp=T({type:r,selectors:[["app-register"]],decls:78,vars:23,consts:[[1,"flex","w-full","max-w-md","flex-col","gap-8"],[1,"auth-heading","mt-6","text-center","text-3xl","font-extrabold"],[1,"auth-text","mt-2","text-center","text-sm"],["routerLink","/auth/login",1,"font-medium","text-indigo-600","hover:text-indigo-500"],[1,"auth-card","p-6"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","registerCode","placeholder","Enter registration code","autocomplete","off"],["matSuffix",""],[4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","firstName","placeholder","First name","autocomplete","given-name"],["matInput","","formControlName","lastName","placeholder","Last name","autocomplete","family-name"],["matInput","","formControlName","username","placeholder","Choose a username","autocomplete","username"],["matInput","","type","email","formControlName","email","placeholder","Enter your email","autocomplete","email"],["matInput","","formControlName","bio","placeholder","Tell us about yourself","rows","3"],["matInput","","formControlName","password","placeholder","Choose a password","autocomplete","new-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Confirm your password","autocomplete","new-password",3,"type"],[1,"pt-4"],["mat-raised-button","","color","primary","type","submit",1,"w-full",3,"disabled"],["diameter","20","class","mr-2",4,"ngIf"],["diameter","20",1,"mr-2"]],template:function(l,i){if(l&1&&(t(0,"div",0)(1,"div")(2,"h2",1),o(3,"Create your account"),e(),t(4,"p",2),o(5," Or "),t(6,"a",3),o(7," sign in to your existing account "),e()()(),t(8,"mat-card",4)(9,"form",5),c("ngSubmit",function(){return i.onSubmit()}),t(10,"div")(11,"mat-form-field",6)(12,"mat-label"),o(13,"Register Code"),e(),p(14,"input",7),t(15,"mat-icon",8),o(16,"vpn_key"),e(),f(17,fe,2,0,"mat-error",9),e()(),t(18,"div",10)(19,"mat-form-field",11)(20,"mat-label"),o(21,"First Name"),e(),p(22,"input",12),f(23,ge,2,0,"mat-error",9),e(),t(24,"mat-form-field",11)(25,"mat-label"),o(26,"Last Name"),e(),p(27,"input",13),f(28,ce,2,0,"mat-error",9),e()(),t(29,"div")(30,"mat-form-field",6)(31,"mat-label"),o(32,"Username"),e(),p(33,"input",14),t(34,"mat-icon",8),o(35,"person"),e(),f(36,_e,2,0,"mat-error",9)(37,he,2,0,"mat-error",9),e()(),t(38,"div")(39,"mat-form-field",6)(40,"mat-label"),o(41,"Email"),e(),p(42,"input",15),t(43,"mat-icon",8),o(44,"email"),e(),f(45,Ce,2,0,"mat-error",9)(46,we,2,0,"mat-error",9),e()(),t(47,"div")(48,"mat-form-field",6)(49,"mat-label"),o(50,"Bio"),e(),p(51,"textarea",16),t(52,"mat-icon",8),o(53,"description"),e()()(),t(54,"div")(55,"mat-form-field",6)(56,"mat-label"),o(57,"Password"),e(),p(58,"input",17),t(59,"button",18),c("click",function(){return i.hidePassword=!i.hidePassword}),t(60,"mat-icon"),o(61),e()(),f(62,ve,2,0,"mat-error",9)(63,be,2,0,"mat-error",9),e()(),t(64,"div")(65,"mat-form-field",6)(66,"mat-label"),o(67,"Confirm Password"),e(),p(68,"input",19),t(69,"button",18),c("click",function(){return i.hideConfirmPassword=!i.hideConfirmPassword}),t(70,"mat-icon"),o(71),e()(),f(72,Se,2,0,"mat-error",9)(73,Ee,2,0,"mat-error",9),e()(),t(74,"div",20)(75,"button",21),f(76,xe,1,0,"mat-spinner",22)(77,ye,2,0,"span",9),e()()()()()),l&2){let s,w,v,b,S,E,x,y,F,M,R;a(9),m("formGroup",i.registerForm),a(8),m("ngIf",(s=i.registerForm.get("registerCode"))==null?null:s.hasError("required")),a(6),m("ngIf",(w=i.registerForm.get("firstName"))==null?null:w.hasError("required")),a(5),m("ngIf",(v=i.registerForm.get("lastName"))==null?null:v.hasError("required")),a(8),m("ngIf",(b=i.registerForm.get("username"))==null?null:b.hasError("required")),a(),m("ngIf",(S=i.registerForm.get("username"))==null?null:S.hasError("minlength")),a(8),m("ngIf",(E=i.registerForm.get("email"))==null?null:E.hasError("required")),a(),m("ngIf",(x=i.registerForm.get("email"))==null?null:x.hasError("email")),a(12),m("type",i.hidePassword?"password":"text"),a(),h("aria-label","Hide password")("aria-pressed",i.hidePassword),a(2),C(i.hidePassword?"visibility_off":"visibility"),a(),m("ngIf",(y=i.registerForm.get("password"))==null?null:y.hasError("required")),a(),m("ngIf",(F=i.registerForm.get("password"))==null?null:F.hasError("minlength")),a(5),m("type",i.hideConfirmPassword?"password":"text"),a(),h("aria-label","Hide password")("aria-pressed",i.hideConfirmPassword),a(2),C(i.hideConfirmPassword?"visibility_off":"visibility"),a(),m("ngIf",(M=i.registerForm.get("confirmPassword"))==null?null:M.hasError("required")),a(),m("ngIf",(R=i.registerForm.get("confirmPassword"))==null?null:R.hasError("passwordMismatch")),a(2),m("disabled",i.registerForm.invalid||i.isLoading),a(),m("ngIf",i.isLoading),a(),m("ngIf",!i.isLoading)}},dependencies:[A,L,Z,W,z,J,K,X,Y,O,D,te,ee,ae,ne,re,ie,oe,le,me,$,B,G,H,j,de,se],styles:[".auth-background[_ngcontent-%COMP%]{background-color:light-dark(#f9fafb,#111827)}.auth-card[_ngcontent-%COMP%]{background-color:light-dark(#ffffff,#1f2937);box-shadow:light-dark(0 10px 15px -3px rgba(0,0,0,.1),0 10px 15px -3px rgba(0,0,0,.5))}.auth-heading[_ngcontent-%COMP%]{color:light-dark(#111827,#f9fafb)}.auth-text[_ngcontent-%COMP%]{color:light-dark(#6b7280,#d1d5db)}"]})};export{ue as RegisterComponent};
