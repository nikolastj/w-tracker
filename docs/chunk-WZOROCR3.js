import{a as te}from"./chunk-5645LD5N.js";import{a as W,b as X,c as Y}from"./chunk-XGYZ7FAG.js";import{C as Z,D as ee,b as k,d as f,f as A,g as V,h as G,j as h,k as U,n as O,o as $,s as j,t as z,u as J,v as K,y as Q}from"./chunk-YWVSS7CP.js";import{a as B,b as H}from"./chunk-GQIHW5VS.js";import{a as P}from"./chunk-7V3Z7K3G.js";import"./chunk-RQKMS6VN.js";import{L as N,N as q,P as D,Q as R,R as T}from"./chunk-TCJ6M4WK.js";import{Ha as L,I as w,J as y,Oa as m,Pa as e,Q as p,Qa as t,Ra as d,Wb as M,Zb as C,_a as g,e as _,gc as F,hc as E,jc as I,ma as a,ob as o,pb as x,ua as b,ya as u}from"./chunk-SLCG6JVP.js";var c=class extends G{constructor(){super({username:new h("",f.required),password:new h("",[f.required,f.minLength(6)])})}getSubmitValue(){let n=this.value;return{username:n.username||"",password:n.password||""}}};function re(r,n){r&1&&(e(0,"mat-error"),o(1," Username is required "),t())}function oe(r,n){r&1&&(e(0,"mat-error"),o(1," Password is required "),t())}function ne(r,n){r&1&&(e(0,"mat-error"),o(1," Password must be at least 6 characters long "),t())}function ae(r,n){r&1&&d(0,"mat-spinner",17)}function me(r,n){r&1&&(e(0,"span"),o(1,"Sign In"),t())}var ie=class r{authStateService=p(P);authApiService=p(te);router=p(F);destroy$=new _;hidePassword=!0;isLoading=!1;loginForm=new c;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){if(this.loginForm.valid&&!this.isLoading){this.isLoading=!0;let n=this.loginForm.getSubmitValue();this.authApiService.login(n).pipe(y(s=>{this.authStateService.setAuthState(s)}),w(this.destroy$)).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/dashboard"])},error:()=>{this.isLoading=!1}})}}static \u0275fac=function(s){return new(s||r)};static \u0275cmp=b({type:r,selectors:[["app-login"]],decls:36,vars:11,consts:[[1,"w-full","max-w-md","space-y-8"],[1,"auth-heading","mt-6","text-center","text-3xl","font-extrabold"],[1,"auth-text","mt-2","text-center","text-sm"],["routerLink","/auth/register",1,"font-medium","text-indigo-600","hover:text-indigo-500"],[1,"auth-card","p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","username","placeholder","Enter your username","autocomplete","username"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-sm"],["routerLink","/auth/forgot-password",1,"font-medium","text-indigo-600","hover:text-indigo-500"],["mat-raised-button","","color","primary","type","submit",1,"w-full",3,"disabled"],["diameter","20","class","mr-2",4,"ngIf"],["diameter","20",1,"mr-2"]],template:function(s,i){if(s&1&&(e(0,"div",0)(1,"div")(2,"h2",1),o(3," Sign in to your account "),t(),e(4,"p",2),o(5," Or "),e(6,"a",3),o(7," create a new account "),t()()(),e(8,"mat-card",4)(9,"form",5),g("ngSubmit",function(){return i.onSubmit()}),e(10,"div")(11,"mat-form-field",6)(12,"mat-label"),o(13,"Username"),t(),d(14,"input",7),e(15,"mat-icon",8),o(16,"person"),t(),u(17,re,2,0,"mat-error",9),t()(),e(18,"div")(19,"mat-form-field",6)(20,"mat-label"),o(21,"Password"),t(),d(22,"input",10),e(23,"button",11),g("click",function(){return i.hidePassword=!i.hidePassword}),e(24,"mat-icon"),o(25),t()(),u(26,oe,2,0,"mat-error",9)(27,ne,2,0,"mat-error",9),t()(),e(28,"div",12)(29,"div",13)(30,"a",14),o(31," Forgot your password? "),t()()(),e(32,"div")(33,"button",15),u(34,ae,1,0,"mat-spinner",16)(35,me,2,0,"span",9),t()()()()()),s&2){let l,v,S;a(9),m("formGroup",i.loginForm),a(8),m("ngIf",(l=i.loginForm.get("username"))==null?null:l.hasError("required")),a(5),m("type",i.hidePassword?"password":"text"),a(),L("aria-label","Hide password")("aria-pressed",i.hidePassword),a(2),x(i.hidePassword?"visibility_off":"visibility"),a(),m("ngIf",(v=i.loginForm.get("password"))==null?null:v.hasError("required")),a(),m("ngIf",(S=i.loginForm.get("password"))==null?null:S.hasError("minlength")),a(6),m("disabled",i.loginForm.invalid||i.isLoading),a(),m("ngIf",i.isLoading),a(),m("ngIf",!i.isLoading)}},dependencies:[C,M,j,U,k,A,V,O,$,I,E,H,B,W,Q,z,J,K,Y,X,D,q,N,T,R,ee,Z],encapsulation:2})};export{ie as LoginComponent};
