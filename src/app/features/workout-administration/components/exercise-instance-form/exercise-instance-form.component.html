<div class="flex flex-col gap-4">
  <!-- Exercise Info Card -->

  <!-- Sets Section -->
  <div class="flex flex-col gap-1">
    <!-- Add Set Form -->
    <div class="flex flex-col gap-2">
      <app-exercise-set-form
        [setForm]="newSetForm"
        [showRemoveButton]="false"
        [isEditMode]="isEditMode"
        [hasSelectedSet]="selectedSetIndex !== null"
        (addSet)="addSet($event)"
      />
    </div>

    <!-- Existing Sets Pills -->
    @if (exerciseForm.setsArray.controls.length > 0) {
      <app-set-info-container
        [setsArray]="exerciseForm.setsArray"
        [isEditMode]="isEditMode"
        [selectedSetIndex]="selectedSetIndex"
        (setSelected)="onSetSelected($event)"
      />
    }
  </div>

  <!-- Exercise Comments -->
  <!-- <div class="flex flex-col gap-4">
    <h3 class="text-lg font-medium">Comments & Notes</h3>
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Exercise Comments</mat-label>
      <textarea
        matInput
        rows="3"
        placeholder="Add any notes about this exercise..."
        [formControl]="exerciseForm.controls.comment"
      ></textarea>
    </mat-form-field>
  </div> -->

  <!-- Energy Level -->
  <!-- <div class="flex flex-col gap-4">
    <h3 class="text-lg font-medium">Energy Level</h3>
    <div class="px-4">
      <mat-slider
        [min]="1"
        [max]="10"
        [step]="1"
        [discrete]="true"
        [showTickMarks]="true"
        class="w-full"
      >
        <input matSliderThumb [formControl]="exerciseForm.controls.energyLevel" />
      </mat-slider>
      <div class="mt-1 flex justify-between text-xs text-gray-500">
        <span>Low Energy (1)</span>
        <span>High Energy (10)</span>
      </div>
      @if (exerciseForm.controls.energyLevel.value) {
        <div class="mt-2 text-center">
          <span class="text-sm font-medium">
            Energy Level: {{ exerciseForm.controls.energyLevel.value }}
          </span>
        </div>
      }
    </div>
  </div> -->

  <!-- Action Buttons -->
  <div class="flex justify-between">
    <!-- Edit/Unselect Button (visible only when there are sets) -->
    @if (exerciseForm.setsArray.controls.length > 0) {
      <button mat-stroked-button color="primary" (click)="onEditAction()" class="px-4">
        <mat-icon class="mr-1">{{ editButtonIcon }}</mat-icon>
        {{ editButtonText }}
      </button>
    }

    <!-- Remove Button (Dynamic) -->
    <button
      mat-stroked-button
      color="warn"
      (click)="onRemoveAction()"
      [disabled]="isRemoveButtonDisabled"
      class="px-4"
    >
      <mat-icon class="mr-1">{{ removeButtonIcon }}</mat-icon>
      {{ removeButtonText }}
    </button>
  </div>
</div>
